Here is your consolidated documentation, cleaned up for clarity and conciseness.

# AWS & Development Environment Setup Guide

## 1. Python Virtual Environment Management

### Prerequisites & Creation

One-time setup to install `venv` and create a new environment.

```bash
# Install venv module
sudo apt update
sudo apt install python3-venv

# Create environment (replace 'my_env' with preferred name)
python3 -m venv my_env

```

### Manage Environment

Commands to activate, verify, and deactivate the environment.

* **Activate:**
```bash
source my_env/bin/activate

```


*(Visual Indicator: Prompt changes to `(my_env) user@hostname:~$`)*
* **Verify Active Python:**
```bash
which python
# Output should point to: .../my_env/bin/python

```


* **Deactivate:**
```bash
deactivate

```



---

## 2. Troubleshooting `boto3` Import Errors

If "Import 'boto3' could not be resolved" appears, follow these steps:

### A. Terminal Fix (Install Package)

Ensure the environment is active and install the library.

```bash
source my_env/bin/activate
pip install boto3

```

*Verify installation:* `python -c "import boto3; print(boto3.__version__)"`

### B. VS Code Fix (Select Interpreter)

If VS Code still shows an error despite installation:

1. Press `Ctrl` + `Shift` + `P`.
2. Select **Python: Select Interpreter**.
3. Choose the entry labeled **`('my_env': venv)`** or `./my_env/bin/python`.
4. Restart the VS Code terminal.

---

## 3. AWS Serverless CORS Configuration

**Issue:** Browser blocks frontend requests to API Gateway due to missing CORS headers.
**Solution:** Update the Lambda function to return `Access-Control-Allow-` headers.

### Update `producer.py`

Modify the return statement in your Lambda handler:

```python
import json
import boto3
import os

sqs = boto3.client('sqs')
QUEUE_URL = os.environ['SQS_QUEUE_URL']

def lambda_handler(event, context):
    try:
        body = json.loads(event['body'])
        
        sqs.send_message(
            QueueUrl=QUEUE_URL,
            MessageBody=json.dumps(body)
        )
        
        return {
            'statusCode': 200,
            # --- CORS HEADERS START ---
            'headers': {
                'Access-Control-Allow-Origin': '*', 
                'Access-Control-Allow-Headers': 'Content-Type',
                'Access-Control-Allow-Methods': 'OPTIONS,POST,GET'
            },
            # --- CORS HEADERS END ---
            'body': json.dumps('Order placed successfully!')
        }
    except Exception as e:
        return {
            'statusCode': 500,
            'headers': {
                'Access-Control-Allow-Origin': '*',
                'Access-Control-Allow-Headers': 'Content-Type',
                'Access-Control-Allow-Methods': 'OPTIONS,POST,GET'
            },
            'body': str(e)
        }

```

### Apply Changes

Redeploy the infrastructure to update the Lambda code.

```bash
terraform apply -auto-approve

```

---

## 4. Git Maintenance Commands

### Untrack Files (Without Deleting)

Remove files (like `.terraform/` or `venv/`) from the Git index if explicitly committed.

```bash
git rm -r --cached .

```

### Auto-Setup Remote Branch

Configure Git to automatically set the upstream branch on push.

```bash
git config --global push.autoSetupRemote true

```

---

## 5. VS Code Configuration (Format on Save)

### `settings.json` Configuration

1. Press `Ctrl` + `Shift` + `P` -> **Open User Settings (JSON)**.
2. Paste the following to enable formatters for Terraform, Python, JS, Java, Scala, and SQL.

```json
{
    "explorer.confirmDelete": false,
    "explorer.confirmDragAndDrop": false,
    "security.workspace.trust.untrustedFiles": "open",
    "python.defaultInterpreterPath": "/bin/python3",
    "aws.cloudformation.telemetry.enabled": false,
    "gitlens.ai.model": "vscode",
    "gitlens.ai.vscode.model": "copilot:gpt-4.1",
    "[terraform]": {
        "editor.defaultFormatter": "hashicorp.terraform",
        "editor.formatOnSave": true,
        "editor.formatOnSaveMode": "file"
    },
    "[terraform-vars]": {
        "editor.defaultFormatter": "hashicorp.terraform",
        "editor.formatOnSave": true,
        "editor.formatOnSaveMode": "file"
    },
    "[python]": {
        "editor.defaultFormatter": "ms-python.black-formatter",
        "editor.formatOnSave": true
    },
    "[javascript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.formatOnSave": true
    },
    "[typescript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.formatOnSave": true
    },
    "[java]": {
        "editor.defaultFormatter": "redhat.java",
        "editor.formatOnSave": true
    },
    "[scala]": {
        "editor.defaultFormatter": "scalameta.metals",
        "editor.formatOnSave": true
    },
    "[sql]": {
        "editor.defaultFormatter": "mtxr.sqltools",
        "editor.formatOnSave": true
    }
}

```

### Install Required Extensions

Run in terminal to install formatters referenced in `settings.json`.

```bash
# Python
code --install-extension ms-python.black-formatter
# JS/TS
code --install-extension esbenp.prettier-vscode
# Java
code --install-extension redhat.java
# Scala
code --install-extension scalameta.metals
# SQL
code --install-extension mtxr.sqltools

```

---

## 6. GitHub Actions: Terraform Validation

Automate syntax checking on Pull Requests.

### Setup Workflow

1. Create directory: `mkdir -p .github/workflows`
2. Create `.github/workflows/terraform-check.yml`:

```yaml
name: Terraform Check

on:
  pull_request:
    branches:
      - main

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Setup Terraform
        uses: hashicorp/setup-terraform@v2
        with:
          terraform_version: 1.5.0 

      # Init without backend to avoid AWS credential requirements
      - name: Terraform Init
        run: terraform init -backend=false

      - name: Terraform Format
        run: terraform fmt -check

      - name: Terraform Validate
        run: terraform validate

```

### Push to Repository

```bash
git add .github/workflows/terraform-check.yml
git commit -m "Add Terraform validation CI"
git push

```